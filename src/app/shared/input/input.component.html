<!-- CHECKED -->

<div class="field">
    <label>{{ label }}</label>
    <!-- Add three inputs and bind each of these controls defined in the class component (username, password,
        passwordConfirmation) to those three inputs -->
    <!-- use data binding to bind the parent with the child components -->
    <input *ngIf="controlType === 'input'" [type]="inputType" [formControl]="control" />
    <!--  error handling using the validators results and using ngIf structural directive and calling the errors objects from the control object (the FormControl - fields) -->
    <!--  also call showErrors() method defined in the class component to decide when to show the errors (when dirty, touched and errors objects are present) -->

    <textarea *ngIf="controlType === 'textarea'" [formControl]="control">
      </textarea>

    <div *ngIf="showErrors()" class="ui pointing red basic label">
        <p *ngIf="control?.errors?.['required']">
            Value is required
        </p>
        <p *ngIf="control?.errors?.['email']">
            Enter a valid email
        </p>
        <p *ngIf="control?.errors?.['minlength']">
            Value you entered is
            {{ control.errors?.['minlength'].actualLength }}
            characters long, but it must be at least
            {{ control.errors?.['minlength'].requiredLength }}
            characters
        </p>
        <p *ngIf="control?.errors?.['maxlength']">
            Value you entered is
            {{ control.errors?.['maxlength'].actualLength }}
            characters long, but it cannot be longer than
            {{ control.errors?.['maxlength'].requiredLength }}
            characters
        </p>
        <p *ngIf="control?.errors?.['pattern']">
            Invalid format
        </p>
        <p *ngIf="control?.errors?.['nonUniqueUsername']">
            Username is taken
        </p>
        <p *ngIf="control?.errors?.['noConnection']">
            Can't tell if username is taken
        </p>
    </div>
</div>